<style>
    body {
    font:15px arial,sans-serif;
    }
    h1 {
    margin: 0 0 10px 0;
    padding: 5px;
    font-size: 24px;
    background-color: #999;
    color: #fff;
    }

    table {
    margin: 30px;
    }
    th, td {
    padding: 5px;
    border: 1px solid #999;
    }
    th {
    background: #ccc;
    }
    tr:nth-child(odd) {
    background: #eee;
    }
    td a {
    color: #000;
    text-decoration: underline;
    }
    .textbox {
         border: 1px solid #848484;
         -webkit-border-radius: 30px;
         -moz-border-radius: 30px;
         border-radius: 30px;
         outline:0;
         height:25px;
         width: 275px;
         padding-left:10px;
         padding-right:10px;
     }
</style>
<h1>Best quotes page.</h1>
    <!-- Load Jquery from CDN  for easy DOM manipulations -->
    <script src="http://code.jquery.com/jquery-latest.min.js"    type="text/javascript"></script>
<!-- Insertion point for handlebars template -->
<center>
    {{#if user}}
        <form>
            <input class="textbox"type="text" placeholder="Quote">
            <input class="textbox"type="text" placeholder="Author">
            <input class="textbox"type="text" placeholder="Year">
        </form>
    {{else}}
        <p1>You can add quotes if you <a href="/register">register</a>. Already have an account? <a href="/login">Login!</a></p1>
    {{/if}}

<table id="quoteTable">
    <thead>
    <tr>
        <th>ID</th>
        <th>Quote</th>
        <th>Author</th>
        <th>Year</th>
    </tr>
    </thead>

</table>
</center>
    <script>
        $(document).ready(function(){
            $.get("/api/v1/quotes/random",function(data,status,xhr){
                var quotes=data.quotes;
                var quote=quotes[0];
                var quoteString=escapeHtml(quote.quote)+" - "+quote.author+" "+quote.year;
                $('h2').html(quoteString);
            });
            $.get("/api/v1/quotes",function(data,status,xhr){
                var quotes=data.quotes;
                for(var i=0;i<quotes.length;i++){
                    var row="<tr><td>"+quotes[i].id+"</td><td>"+escapeHtml(quotes[i].quote)+"</td><td>"+quotes[i].author+"</td><td>"+quotes[i].year+"</td></tr>"
                    $("#quoteTable").append(row);
                }
            });
        });
        function escapeHtml(unsafe) {
            return unsafe
                    .replace(/&/g, "&amp;")
                    .replace(/</g, "&lt;")
                    .replace(/>/g, "&gt;")
                    .replace(/"/g, "&quot;")
                    .replace(/'/g, "&#039;");
        }
    </script>
</div>
